# Clauma - 競馬予想AIシステム

専門家インタビュー＆プロンプト融合戦略を採用した競馬予想システム。複数の専門家AIが議論し、期待値の高い馬を推奨します。

## 特徴

- **4人の専門家による多角的分析**
  - 展開予想専門家：レース展開とペース分析
  - 騎手専門家：騎手の特性と相性を総合評価
  - 穴狙い専門家：高オッズ馬の隠れた魅力を発見
  - 総合判断専門家：エッジスコアで投資価値を判定

- **コンセンサスとマイノリティ意見の分析**
  - 多数派意見だけでなく、逸脱意見のエッジも評価
  - 市場が見落としている投資機会を発見

- **期待値重視の投資戦略**
  - 期待値1.0超えの馬をすべて推奨
  - 固定賭け金（1000円）でリスク管理

## セットアップ

### 1. リポジトリのクローン

```bash
git clone https://github.com/foie0222/clauma.git
cd clauma
```

### 2. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 3. 環境変数の設定

`.env`ファイルを作成し、Anthropic APIキーを設定：

```bash
# .env
ANTHROPIC_API_KEY=your_api_key_here
```

## 使い方

### 基本的な実行

```bash
python graph/prediction_graph.py
```

### レースデータの準備

`data/race.txt`にnetkeiba.com形式のレース情報を配置してください。

例：
```
2025年6月21日（土曜） 1回函館3日	発走時刻：15時25分
11レース
STV杯
3歳以上	2勝クラス	（混合）（特指）	定量	コース：1,200メートル（芝・右）
...
```

## システム構成

```
clauma/
├── agents/
│   ├── race_expert.py      # 展開予想専門家
│   ├── jockey_expert.py    # 騎手専門家
│   ├── contrarian_expert.py # 穴狙い専門家
│   └── moderator.py        # 総合判断専門家
├── graph/
│   └── prediction_graph.py # LangGraphによる予想フロー
├── data/
│   └── race.txt           # レース情報
└── diary.md               # 開発日記
```

## 出力例

```
=== 競馬予想システム実行結果 ===

=== 専門家意見 ===
1. 【展開予想専門家】
ハイペース予想で差し馬有利な展開...

2. 【騎手専門家】
減量騎手の恩恵を受ける馬に注目...

3. 【穴狙い専門家】
人気薄ながら前走で不利があった馬を推奨...

=== 最終判断 ===
推奨ベット:
  7番 オッズ47.0 期待値1.41 金額1000円 エッジスコア0.80
  11番 オッズ28.9 期待値1.15 金額1000円 エッジスコア0.75
```

## 注意事項

- このシステムは投資助言ではありません
- 競馬はギャンブルです。余裕資金で楽しみましょう
- APIコストがかかります（Claude 3.5 Sonnet使用）

## ライセンス

MIT License

## 作者

foie0222

## 謝辞

開発にはClaude Code（Anthropic）を使用しました。